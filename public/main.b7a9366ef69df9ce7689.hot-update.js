"use strict";
self["webpackHotUpdateboilerplate_prismic"]("main",{

/***/ "./app/components/Canvas/Home/index.js":
/*!*********************************************!*\
  !*** ./app/components/Canvas/Home/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Transform.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/extras/Plane.js");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/map */ "./node_modules/lodash/map.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Media__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Media */ "./app/components/Canvas/Home/Media.js");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {
  constructor({
    gl,
    scene,
    sizes
  }) {
    this.gl = gl;
    this.scene = scene;
    this.sizes = sizes;
    this.group = new ogl__WEBPACK_IMPORTED_MODULE_2__.Transform();
    this.galleryElement = document.querySelector('.home__gallery');
    this.mediasElements = document.querySelectorAll('.home__gallery__media__image');
    this.slotRoll = document.querySelector('.home__button');
    this.buttonRoll = document.querySelector('.home__button button');
    this.homeResult = document.querySelector('.home__result');
    this.nameList = document.querySelector('.watch__name-list');
    this.imageList = document.querySelector('.watch__image-list ');
    this.speedAutoScroll = 2;
    this.x = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.y = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.scrollCurrent = {
      x: 0,
      y: 0
    };
    this.scroll = {
      x: 0,
      y: 0
    };
    this.speed = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.createGeometry();
    this.createGallery();
    this.onResize({
      sizes: this.sizes
    });
    this.createButtonRoll(this.slotRoll);
    this.group.setParent(this.scene);
    this.show();
  }
  createGeometry() {
    this.geometry = new ogl__WEBPACK_IMPORTED_MODULE_3__.Plane(this.gl, {
      heightSegments: 20,
      widthSegments: 20
    });
  }
  createGallery() {
    this.medias = lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.mediasElements, (element, index) => {
      return new _Media__WEBPACK_IMPORTED_MODULE_1__["default"]({
        element,
        geometry: this.geometry,
        index,
        gl: this.gl,
        scene: this.group,
        sizes: this.sizes
      });
    });
  }
  createButtonRoll(buttonRoll) {
    let mediaAssets = [];
    buttonRoll.addEventListener('click', _ => {
      this.nameList.innerHTML = '';
      this.imageList.innerHTML = '';

      // this.scroll.y = 0
      mediaAssets = [];
      this.speedAutoScroll = 0;
      this.y.target = Math.random() * 5000;
      lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, (media, index) => {
        mediaAssets[index] = [media.bounds.top, media.element.alt, media.element.currentSrc];
      });
      const target = this.scroll.y + this.sizes.height / 2;
      console.log(target);

      // mediaAssets.sort(function (a, b) {
      //   return Math.abs(target - a[0]) - Math.abs(target - b[0])
      // })
      for (let i = 0; i < 4; i++) {
        const newName = document.createElement('li');
        newName.innerHTML = mediaAssets[i][1];
        newName.classList = 'text-primary font-medium text-lg text-center';
        this.nameList.appendChild(newName);
        const newImage = document.createElement('img');
        newImage.src = mediaAssets[i][2];
        newImage.classList = 'img-cover';
        this.imageList.appendChild(newImage);
      }
      gsap__WEBPACK_IMPORTED_MODULE_4__["default"].to(this.homeResult, {
        autoAlpha: 1
      });
      console.log(mediaAssets[0], mediaAssets[1], mediaAssets[2], mediaAssets[3]);
      this.buttonRoll.innerText = 'Roll again ?';
    });
  }

  /****
   * ANIMATIONS
   * ***/
  show() {
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.show());
  }
  hide() {
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.hide());
  }

  /****
   * EVENTS
   * ***/
  onResize(event) {
    this.galleryBounds = this.galleryElement.getBoundingClientRect();
    this.sizes = event.sizes;
    this.gallerySizes = {
      height: this.galleryBounds.height / window.innerHeight * this.sizes.height,
      width: this.galleryBounds.width / window.innerWidth * this.sizes.width
    };
    this.scroll.x = this.x.target = 0;
    this.scroll.y = this.y.target = 0;
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.onResize(event, this.scroll));
  }
  onTouchDown({
    x,
    y
  }) {}
  onTouchMove({
    x,
    y
  }) {}
  onTouchUp({
    x,
    y
  }) {}
  onWheel({
    pixelX,
    pixelY
  }) {
    // this.x.target += pixelX
    this.y.target += pixelY;
  }

  /****
   * LOOP
   * ***/
  update() {
    this.y.target += this.speedAutoScroll;
    this.speed.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.speed.current, this.speed.target, this.speed.lerp);
    this.x.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.x.current, this.x.target, this.x.lerp);
    this.y.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.y.current, this.y.target, this.y.lerp);
    if (this.scroll.y < this.y.current) {
      this.y.direction = 'top';
    } else if (this.scroll.y > this.y.current) {
      this.y.direction = 'bottom';
    }
    this.scroll.x = this.x.current;
    this.scroll.y = this.y.current;
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, (media, index) => {
      const offsetY = this.sizes.height * 0.6;
      const scaleY = media.mesh.scale.y / 2;
      if (index % 2 === 0) {
        this.multiplier = -1;
      } else if (index % 2 === 1) {
        this.multiplier = 1;
      }
      media.update(media, this.scroll, this.speed.current, this.multiplier, this.y.direction, this.gallerySizes.height, offsetY, scaleY, this.y);
    });
  }

  /****
   * DESTROY
   * ***/
  destroy() {
    this.scene.removeChild(this.group);
  }
});

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("4af0e08918b2ed830321")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFBLEVBQUk7SUFDVCxJQUFJLENBQUNsRixLQUFLLENBQUNtRixXQUFXLENBQUMsSUFBSSxDQUFDakYsS0FBSyxDQUFDO0VBQ3BDO0FBQ0Y7Ozs7Ozs7O1VDbk5BIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9pbGVycGxhdGUtcHJpc21pYy8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2JvaWxlcnBsYXRlLXByaXNtaWMvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBsYW5lLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnXHJcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXHJcblxyXG5pbXBvcnQgbWFwIGZyb20gJ2xvZGFzaC9tYXAnXHJcblxyXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICBjb25zdHJ1Y3RvciAoeyBnbCwgc2NlbmUsIHNpemVzIH0pIHtcclxuICAgIHRoaXMuZ2wgPSBnbFxyXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lXHJcbiAgICB0aGlzLnNpemVzID0gc2l6ZXNcclxuXHJcbiAgICB0aGlzLmdyb3VwID0gbmV3IFRyYW5zZm9ybSgpXHJcblxyXG4gICAgdGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19nYWxsZXJ5JylcclxuICAgIHRoaXMubWVkaWFzRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG9tZV9fZ2FsbGVyeV9fbWVkaWFfX2ltYWdlJylcclxuICAgIHRoaXMuc2xvdFJvbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fYnV0dG9uJylcclxuICAgIHRoaXMuYnV0dG9uUm9sbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19idXR0b24gYnV0dG9uJylcclxuICAgIHRoaXMuaG9tZVJlc3VsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19yZXN1bHQnKVxyXG4gICAgdGhpcy5uYW1lTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53YXRjaF9fbmFtZS1saXN0JylcclxuICAgIHRoaXMuaW1hZ2VMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndhdGNoX19pbWFnZS1saXN0ICcpXHJcblxyXG4gICAgdGhpcy5zcGVlZEF1dG9TY3JvbGwgPSAyXHJcblxyXG4gICAgdGhpcy54ID0ge1xyXG4gICAgICBjdXJyZW50OiAwLFxyXG4gICAgICB0YXJnZXQ6IDAsXHJcbiAgICAgIGxlcnA6IDAuMVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMueSA9IHtcclxuICAgICAgY3VycmVudDogMCxcclxuICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICBsZXJwOiAwLjFcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQgPSB7XHJcbiAgICAgIHg6IDAsXHJcbiAgICAgIHk6IDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3BlZWQgPSB7XHJcbiAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgIHRhcmdldDogMCxcclxuICAgICAgbGVycDogMC4xXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpXHJcbiAgICB0aGlzLmNyZWF0ZUdhbGxlcnkoKVxyXG4gICAgdGhpcy5vblJlc2l6ZSh7XHJcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXHJcbiAgICB9KVxyXG4gICAgdGhpcy5jcmVhdGVCdXR0b25Sb2xsKHRoaXMuc2xvdFJvbGwpXHJcblxyXG4gICAgdGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcclxuXHJcbiAgICB0aGlzLnNob3coKVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlR2VvbWV0cnkgKCkge1xyXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsLCB7XHJcbiAgICAgIGhlaWdodFNlZ21lbnRzOiAyMCxcclxuICAgICAgd2lkdGhTZWdtZW50czogMjBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjcmVhdGVHYWxsZXJ5ICgpIHtcclxuICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IE1lZGlhKHtcclxuICAgICAgICBlbGVtZW50LFxyXG4gICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxyXG4gICAgICAgIGluZGV4LFxyXG4gICAgICAgIGdsOiB0aGlzLmdsLFxyXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxyXG4gICAgICAgIHNpemVzOiB0aGlzLnNpemVzXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQnV0dG9uUm9sbCAoYnV0dG9uUm9sbCkge1xyXG4gICAgbGV0IG1lZGlhQXNzZXRzID0gW11cclxuXHJcbiAgICBidXR0b25Sb2xsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgXyA9PiB7XHJcbiAgICAgIHRoaXMubmFtZUxpc3QuaW5uZXJIVE1MID0gJydcclxuICAgICAgdGhpcy5pbWFnZUxpc3QuaW5uZXJIVE1MID0gJydcclxuXHJcbiAgICAgIC8vIHRoaXMuc2Nyb2xsLnkgPSAwXHJcbiAgICAgIG1lZGlhQXNzZXRzID0gW11cclxuICAgICAgdGhpcy5zcGVlZEF1dG9TY3JvbGwgPSAwXHJcbiAgICAgIHRoaXMueS50YXJnZXQgPSBNYXRoLnJhbmRvbSgpICogNTAwMFxyXG4gICAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcclxuICAgICAgICBtZWRpYUFzc2V0c1tpbmRleF0gPSBbbWVkaWEuYm91bmRzLnRvcCwgbWVkaWEuZWxlbWVudC5hbHQsIG1lZGlhLmVsZW1lbnQuY3VycmVudFNyY11cclxuICAgICAgfSlcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5zY3JvbGwueSArIHRoaXMuc2l6ZXMuaGVpZ2h0IC8gMlxyXG4gICAgICBjb25zb2xlLmxvZyh0YXJnZXQpXHJcblxyXG4gICAgICAvLyBtZWRpYUFzc2V0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIC8vICAgcmV0dXJuIE1hdGguYWJzKHRhcmdldCAtIGFbMF0pIC0gTWF0aC5hYnModGFyZ2V0IC0gYlswXSlcclxuICAgICAgLy8gfSlcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICBjb25zdCBuZXdOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKVxyXG4gICAgICAgIG5ld05hbWUuaW5uZXJIVE1MID0gbWVkaWFBc3NldHNbaV1bMV1cclxuICAgICAgICBuZXdOYW1lLmNsYXNzTGlzdCA9ICd0ZXh0LXByaW1hcnkgZm9udC1tZWRpdW0gdGV4dC1sZyB0ZXh0LWNlbnRlcidcclxuICAgICAgICB0aGlzLm5hbWVMaXN0LmFwcGVuZENoaWxkKG5ld05hbWUpXHJcblxyXG4gICAgICAgIGNvbnN0IG5ld0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgICAgICBuZXdJbWFnZS5zcmMgPSBtZWRpYUFzc2V0c1tpXVsyXVxyXG4gICAgICAgIG5ld0ltYWdlLmNsYXNzTGlzdCA9ICdpbWctY292ZXInXHJcbiAgICAgICAgdGhpcy5pbWFnZUxpc3QuYXBwZW5kQ2hpbGQobmV3SW1hZ2UpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIEdTQVAudG8odGhpcy5ob21lUmVzdWx0LCB7XHJcbiAgICAgICAgYXV0b0FscGhhOiAxXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhtZWRpYUFzc2V0c1swXSwgbWVkaWFBc3NldHNbMV0sIG1lZGlhQXNzZXRzWzJdLCBtZWRpYUFzc2V0c1szXSlcclxuICAgICAgdGhpcy5idXR0b25Sb2xsLmlubmVyVGV4dCA9ICdSb2xsIGFnYWluID8nXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBBTklNQVRJT05TXHJcbiAgICogKioqL1xyXG4gIHNob3cgKCkge1xyXG4gICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5zaG93KCkpXHJcbiAgfVxyXG5cclxuICBoaWRlICgpIHtcclxuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuaGlkZSgpKVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBFVkVOVFNcclxuICAgKiAqKiovXHJcbiAgb25SZXNpemUgKGV2ZW50KSB7XHJcbiAgICB0aGlzLmdhbGxlcnlCb3VuZHMgPSB0aGlzLmdhbGxlcnlFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgdGhpcy5zaXplcyA9IGV2ZW50LnNpemVzXHJcblxyXG4gICAgdGhpcy5nYWxsZXJ5U2l6ZXMgPSB7XHJcbiAgICAgIGhlaWdodDogdGhpcy5nYWxsZXJ5Qm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodCAqIHRoaXMuc2l6ZXMuaGVpZ2h0LFxyXG4gICAgICB3aWR0aDogdGhpcy5nYWxsZXJ5Qm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLnNpemVzLndpZHRoXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC50YXJnZXQgPSAwXHJcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LnRhcmdldCA9IDBcclxuXHJcbiAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLm9uUmVzaXplKGV2ZW50LCB0aGlzLnNjcm9sbCkpXHJcbiAgfVxyXG5cclxuICBvblRvdWNoRG93biAoeyB4LCB5IH0pIHtcclxuICB9XHJcblxyXG4gIG9uVG91Y2hNb3ZlICh7IHgsIHkgfSkge1xyXG5cclxuICB9XHJcblxyXG4gIG9uVG91Y2hVcCAoeyB4LCB5IH0pIHtcclxuXHJcbiAgfVxyXG5cclxuICBvbldoZWVsICh7IHBpeGVsWCwgcGl4ZWxZIH0pIHtcclxuICAgIC8vIHRoaXMueC50YXJnZXQgKz0gcGl4ZWxYXHJcbiAgICB0aGlzLnkudGFyZ2V0ICs9IHBpeGVsWVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBMT09QXHJcbiAgICogKioqL1xyXG4gIHVwZGF0ZSAoKSB7XHJcbiAgICB0aGlzLnkudGFyZ2V0ICs9IHRoaXMuc3BlZWRBdXRvU2Nyb2xsXHJcbiAgICB0aGlzLnNwZWVkLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc3BlZWQuY3VycmVudCwgdGhpcy5zcGVlZC50YXJnZXQsIHRoaXMuc3BlZWQubGVycClcclxuXHJcbiAgICB0aGlzLnguY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy54LmN1cnJlbnQsIHRoaXMueC50YXJnZXQsIHRoaXMueC5sZXJwKVxyXG4gICAgdGhpcy55LmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMueS5jdXJyZW50LCB0aGlzLnkudGFyZ2V0LCB0aGlzLnkubGVycClcclxuXHJcbiAgICBpZiAodGhpcy5zY3JvbGwueSA8IHRoaXMueS5jdXJyZW50KSB7XHJcbiAgICAgIHRoaXMueS5kaXJlY3Rpb24gPSAndG9wJ1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbC55ID4gdGhpcy55LmN1cnJlbnQpIHtcclxuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICdib3R0b20nXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC5jdXJyZW50XHJcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LmN1cnJlbnRcclxuXHJcbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3Qgb2Zmc2V0WSA9IHRoaXMuc2l6ZXMuaGVpZ2h0ICogMC42XHJcbiAgICAgIGNvbnN0IHNjYWxlWSA9IG1lZGlhLm1lc2guc2NhbGUueSAvIDJcclxuXHJcbiAgICAgIGlmIChpbmRleCAlIDIgPT09IDApIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxpZXIgPSAtMVxyXG4gICAgICB9IGVsc2UgaWYgKGluZGV4ICUgMiA9PT0gMSkge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGllciA9IDFcclxuICAgICAgfVxyXG5cclxuICAgICAgbWVkaWEudXBkYXRlKG1lZGlhLCB0aGlzLnNjcm9sbCwgdGhpcy5zcGVlZC5jdXJyZW50LCB0aGlzLm11bHRpcGxpZXIsIHRoaXMueS5kaXJlY3Rpb24sIHRoaXMuZ2FsbGVyeVNpemVzLmhlaWdodCwgb2Zmc2V0WSwgc2NhbGVZLCB0aGlzLnkpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBERVNUUk9ZXHJcbiAgICogKioqL1xyXG4gIGRlc3Ryb3kgKCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxyXG4gIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI0YWYwZTA4OTE4YjJlZDgzMDMyMVwiKSJdLCJuYW1lcyI6WyJQbGFuZSIsIlRyYW5zZm9ybSIsIkdTQVAiLCJtYXAiLCJNZWRpYSIsImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwiZ3JvdXAiLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhc0VsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsb3RSb2xsIiwiYnV0dG9uUm9sbCIsImhvbWVSZXN1bHQiLCJuYW1lTGlzdCIsImltYWdlTGlzdCIsInNwZWVkQXV0b1Njcm9sbCIsIngiLCJjdXJyZW50IiwidGFyZ2V0IiwibGVycCIsInkiLCJzY3JvbGxDdXJyZW50Iiwic2Nyb2xsIiwic3BlZWQiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJvblJlc2l6ZSIsImNyZWF0ZUJ1dHRvblJvbGwiLCJzZXRQYXJlbnQiLCJzaG93IiwiZ2VvbWV0cnkiLCJoZWlnaHRTZWdtZW50cyIsIndpZHRoU2VnbWVudHMiLCJtZWRpYXMiLCJlbGVtZW50IiwiaW5kZXgiLCJtZWRpYUFzc2V0cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfIiwiaW5uZXJIVE1MIiwiTWF0aCIsInJhbmRvbSIsIm1lZGlhIiwiYm91bmRzIiwidG9wIiwiYWx0IiwiY3VycmVudFNyYyIsImhlaWdodCIsImNvbnNvbGUiLCJsb2ciLCJpIiwibmV3TmFtZSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhcHBlbmRDaGlsZCIsIm5ld0ltYWdlIiwic3JjIiwidG8iLCJhdXRvQWxwaGEiLCJpbm5lclRleHQiLCJoaWRlIiwiZXZlbnQiLCJnYWxsZXJ5Qm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2FsbGVyeVNpemVzIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJvblRvdWNoRG93biIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWCIsInBpeGVsWSIsInVwZGF0ZSIsInV0aWxzIiwiaW50ZXJwb2xhdGUiLCJkaXJlY3Rpb24iLCJvZmZzZXRZIiwic2NhbGVZIiwibWVzaCIsInNjYWxlIiwibXVsdGlwbGllciIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCJdLCJzb3VyY2VSb290IjoiIn0=