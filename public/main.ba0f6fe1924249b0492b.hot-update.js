"use strict";
self["webpackHotUpdateboilerplate_prismic"]("main",{

/***/ "./app/components/Canvas/Home/index.js":
/*!*********************************************!*\
  !*** ./app/components/Canvas/Home/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Transform.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/extras/Plane.js");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/map */ "./node_modules/lodash/map.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Media__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Media */ "./app/components/Canvas/Home/Media.js");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {
  constructor({
    gl,
    scene,
    sizes
  }) {
    this.gl = gl;
    this.scene = scene;
    this.sizes = sizes;
    this.group = new ogl__WEBPACK_IMPORTED_MODULE_2__.Transform();
    this.galleryElement = document.querySelector('.home__gallery');
    this.mediasElements = document.querySelectorAll('.home__gallery__media__image');
    this.slotRoll = document.querySelector('.home__button');
    this.buttonRoll = document.querySelector('.home__button button');
    this.speedAutoScroll = 2;
    this.x = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.y = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.scrollCurrent = {
      x: 0,
      y: 0
    };
    this.scroll = {
      x: 0,
      y: 0
    };
    this.speed = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.createGeometry();
    this.createGallery();
    this.onResize({
      sizes: this.sizes
    });
    this.createButtonRoll(this.slotRoll);
    this.group.setParent(this.scene);
    this.show();
  }
  createGeometry() {
    this.geometry = new ogl__WEBPACK_IMPORTED_MODULE_3__.Plane(this.gl, {
      heightSegments: 20,
      widthSegments: 20
    });
  }
  createGallery() {
    this.medias = lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.mediasElements, (element, index) => {
      return new _Media__WEBPACK_IMPORTED_MODULE_1__["default"]({
        element,
        geometry: this.geometry,
        index,
        gl: this.gl,
        scene: this.group,
        sizes: this.sizes
      });
    });
  }
  createButtonRoll(buttonRoll) {
    let mediaAssets = [];
    buttonRoll.addEventListener('click', _ => {
      mediaAssets = [];
      this.speedAutoScroll = 0;
      this.y.target = Math.random() * 10000;
      lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, (media, index) => {
        mediaAssets[index] = [media.bounds.top, media.element.alt];
        // console.log(media.bounds.top)
        // console.log(media.element.alt)
        // mediaAssets.push(media.bounds.top)
      });

      console.log(mediaAssets);
      console.log(this.scroll.y + this.sizes.height / 2);
      const target = this.scroll.y + this.sizes.height / 2;

      // mediaAssets.sort((a, b) => {
      //   return Math.abs(target - a) - Math.abs(target - b)
      // })
      mediaAssets.sort(function (a, b) {
        return a[0] - b[0];
      });
      const closest = mediaAssets.reduce((a, b) => {
        return Math.abs(b - target) < Math.abs(a - target) ? b : a;
      });
      console.log(closest);
      this.buttonRoll.innerText = 'Roll again ?';
    });
  }

  /****
   * ANIMATIONS
   * ***/
  show() {
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.show());
  }
  hide() {
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.hide());
  }

  /****
   * EVENTS
   * ***/
  onResize(event) {
    this.galleryBounds = this.galleryElement.getBoundingClientRect();
    this.sizes = event.sizes;
    this.gallerySizes = {
      height: this.galleryBounds.height / window.innerHeight * this.sizes.height,
      width: this.galleryBounds.width / window.innerWidth * this.sizes.width
    };
    this.scroll.x = this.x.target = 0;
    this.scroll.y = this.y.target = 0;
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.onResize(event, this.scroll));
  }
  onTouchDown({
    x,
    y
  }) {}
  onTouchMove({
    x,
    y
  }) {}
  onTouchUp({
    x,
    y
  }) {}
  onWheel({
    pixelX,
    pixelY
  }) {
    // this.x.target += pixelX
    this.y.target += pixelY;
  }

  /****
   * LOOP
   * ***/
  update() {
    this.y.target += this.speedAutoScroll;
    this.speed.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.speed.current, this.speed.target, this.speed.lerp);
    this.x.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.x.current, this.x.target, this.x.lerp);
    this.y.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.y.current, this.y.target, this.y.lerp);
    if (this.scroll.y < this.y.current) {
      this.y.direction = 'top';
    } else if (this.scroll.y > this.y.current) {
      this.y.direction = 'bottom';
    }
    this.scroll.x = this.x.current;
    this.scroll.y = this.y.current;
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, (media, index) => {
      const offsetY = this.sizes.height * 0.6;
      const scaleY = media.mesh.scale.y / 2;
      if (index % 2 === 0) {
        this.multiplier = -1;
      } else if (index % 2 === 1) {
        this.multiplier = 1;
      }
      media.update(media, this.scroll, this.speed.current, this.multiplier, this.y.direction, this.gallerySizes.height, offsetY, scaleY, this.y);
    });
  }

  /****
   * DESTROY
   * ***/
  destroy() {
    this.scene.removeChild(this.group);
  }
});

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("714101e6943eaf01ebe7")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7TUFDdEIsQ0FBQyxNQUFNLElBQUkzQyxLQUFLLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUMxQixJQUFJLENBQUMyQyxVQUFVLEdBQUcsQ0FBQztNQUNyQjtNQUVBckMsS0FBSyxDQUFDNkIsTUFBTSxDQUFDN0IsS0FBSyxFQUFFLElBQUksQ0FBQ25CLE1BQU0sRUFBRSxJQUFJLENBQUNDLEtBQUssQ0FBQ04sT0FBTyxFQUFFLElBQUksQ0FBQzZELFVBQVUsRUFBRSxJQUFJLENBQUMxRCxDQUFDLENBQUNxRCxTQUFTLEVBQUUsSUFBSSxDQUFDZCxZQUFZLENBQUNaLE1BQU0sRUFBRTJCLE9BQU8sRUFBRUMsTUFBTSxFQUFFLElBQUksQ0FBQ3ZELENBQUMsQ0FBQztJQUM1SSxDQUFDLENBQUM7RUFDSjs7RUFFQTtBQUNGO0FBQ0E7RUFDRTJELE9BQU9BLENBQUEsRUFBSTtJQUNULElBQUksQ0FBQzFFLEtBQUssQ0FBQzJFLFdBQVcsQ0FBQyxJQUFJLENBQUN6RSxLQUFLLENBQUM7RUFDcEM7QUFDRjs7Ozs7Ozs7VUN6TUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS1wcmlzbWljLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYm9pbGVycGxhdGUtcHJpc21pYy93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCdcclxuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuXHJcbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCdcclxuXHJcbmltcG9ydCBNZWRpYSBmcm9tICcuL01lZGlhJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yICh7IGdsLCBzY2VuZSwgc2l6ZXMgfSkge1xyXG4gICAgdGhpcy5nbCA9IGdsXHJcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcclxuICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcclxuXHJcbiAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2dhbGxlcnknKVxyXG4gICAgdGhpcy5tZWRpYXNFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ob21lX19nYWxsZXJ5X19tZWRpYV9faW1hZ2UnKVxyXG4gICAgdGhpcy5zbG90Um9sbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19idXR0b24nKVxyXG4gICAgdGhpcy5idXR0b25Sb2xsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2J1dHRvbiBidXR0b24nKVxyXG5cclxuICAgIHRoaXMuc3BlZWRBdXRvU2Nyb2xsID0gMlxyXG5cclxuICAgIHRoaXMueCA9IHtcclxuICAgICAgY3VycmVudDogMCxcclxuICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICBsZXJwOiAwLjFcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnkgPSB7XHJcbiAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgIHRhcmdldDogMCxcclxuICAgICAgbGVycDogMC4xXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGxDdXJyZW50ID0ge1xyXG4gICAgICB4OiAwLFxyXG4gICAgICB5OiAwXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGwgPSB7XHJcbiAgICAgIHg6IDAsXHJcbiAgICAgIHk6IDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNwZWVkID0ge1xyXG4gICAgICBjdXJyZW50OiAwLFxyXG4gICAgICB0YXJnZXQ6IDAsXHJcbiAgICAgIGxlcnA6IDAuMVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3JlYXRlR2VvbWV0cnkoKVxyXG4gICAgdGhpcy5jcmVhdGVHYWxsZXJ5KClcclxuICAgIHRoaXMub25SZXNpemUoe1xyXG4gICAgICBzaXplczogdGhpcy5zaXplc1xyXG4gICAgfSlcclxuICAgIHRoaXMuY3JlYXRlQnV0dG9uUm9sbCh0aGlzLnNsb3RSb2xsKVxyXG5cclxuICAgIHRoaXMuZ3JvdXAuc2V0UGFyZW50KHRoaXMuc2NlbmUpXHJcblxyXG4gICAgdGhpcy5zaG93KClcclxuICB9XHJcblxyXG4gIGNyZWF0ZUdlb21ldHJ5ICgpIHtcclxuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgUGxhbmUodGhpcy5nbCwge1xyXG4gICAgICBoZWlnaHRTZWdtZW50czogMjAsXHJcbiAgICAgIHdpZHRoU2VnbWVudHM6IDIwXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlR2FsbGVyeSAoKSB7XHJcbiAgICB0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhc0VsZW1lbnRzLCAoZWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBNZWRpYSh7XHJcbiAgICAgICAgZWxlbWVudCxcclxuICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcclxuICAgICAgICBpbmRleCxcclxuICAgICAgICBnbDogdGhpcy5nbCxcclxuICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcclxuICAgICAgICBzaXplczogdGhpcy5zaXplc1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNyZWF0ZUJ1dHRvblJvbGwgKGJ1dHRvblJvbGwpIHtcclxuICAgIGxldCBtZWRpYUFzc2V0cyA9IFtdXHJcblxyXG4gICAgYnV0dG9uUm9sbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF8gPT4ge1xyXG4gICAgICBtZWRpYUFzc2V0cyA9IFtdXHJcbiAgICAgIHRoaXMuc3BlZWRBdXRvU2Nyb2xsID0gMFxyXG4gICAgICB0aGlzLnkudGFyZ2V0ID0gTWF0aC5yYW5kb20oKSAqIDEwMDAwXHJcbiAgICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIG1lZGlhQXNzZXRzW2luZGV4XSA9IFttZWRpYS5ib3VuZHMudG9wLCBtZWRpYS5lbGVtZW50LmFsdCBdXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cobWVkaWEuYm91bmRzLnRvcClcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhtZWRpYS5lbGVtZW50LmFsdClcclxuICAgICAgICAvLyBtZWRpYUFzc2V0cy5wdXNoKG1lZGlhLmJvdW5kcy50b3ApXHJcbiAgICAgIH0pXHJcbiAgICAgIGNvbnNvbGUubG9nKG1lZGlhQXNzZXRzKVxyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLnNjcm9sbC55ICsgdGhpcy5zaXplcy5oZWlnaHQgLyAyKVxyXG4gICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLnNjcm9sbC55ICsgdGhpcy5zaXplcy5oZWlnaHQgLyAyXHJcblxyXG4gICAgICAvLyBtZWRpYUFzc2V0cy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIC8vICAgcmV0dXJuIE1hdGguYWJzKHRhcmdldCAtIGEpIC0gTWF0aC5hYnModGFyZ2V0IC0gYilcclxuICAgICAgLy8gfSlcclxuICAgICAgbWVkaWFBc3NldHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhWzBdIC0gYlswXVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgY2xvc2VzdCA9IG1lZGlhQXNzZXRzLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmFicyhiIC0gdGFyZ2V0KSA8IE1hdGguYWJzIChhIC0gdGFyZ2V0KSA/IGIgOiBhXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhjbG9zZXN0KVxyXG5cclxuICAgICAgdGhpcy5idXR0b25Sb2xsLmlubmVyVGV4dCA9ICdSb2xsIGFnYWluID8nXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBBTklNQVRJT05TXHJcbiAgICogKioqL1xyXG4gIHNob3cgKCkge1xyXG4gICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5zaG93KCkpXHJcbiAgfVxyXG5cclxuICBoaWRlICgpIHtcclxuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEuaGlkZSgpKVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBFVkVOVFNcclxuICAgKiAqKiovXHJcbiAgb25SZXNpemUgKGV2ZW50KSB7XHJcbiAgICB0aGlzLmdhbGxlcnlCb3VuZHMgPSB0aGlzLmdhbGxlcnlFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgdGhpcy5zaXplcyA9IGV2ZW50LnNpemVzXHJcblxyXG4gICAgdGhpcy5nYWxsZXJ5U2l6ZXMgPSB7XHJcbiAgICAgIGhlaWdodDogdGhpcy5nYWxsZXJ5Qm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodCAqIHRoaXMuc2l6ZXMuaGVpZ2h0LFxyXG4gICAgICB3aWR0aDogdGhpcy5nYWxsZXJ5Qm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLnNpemVzLndpZHRoXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC50YXJnZXQgPSAwXHJcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LnRhcmdldCA9IDBcclxuXHJcbiAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLm9uUmVzaXplKGV2ZW50LCB0aGlzLnNjcm9sbCkpXHJcbiAgfVxyXG5cclxuICBvblRvdWNoRG93biAoeyB4LCB5IH0pIHtcclxuICB9XHJcblxyXG4gIG9uVG91Y2hNb3ZlICh7IHgsIHkgfSkge1xyXG5cclxuICB9XHJcblxyXG4gIG9uVG91Y2hVcCAoeyB4LCB5IH0pIHtcclxuXHJcbiAgfVxyXG5cclxuICBvbldoZWVsICh7IHBpeGVsWCwgcGl4ZWxZIH0pIHtcclxuICAgIC8vIHRoaXMueC50YXJnZXQgKz0gcGl4ZWxYXHJcbiAgICB0aGlzLnkudGFyZ2V0ICs9IHBpeGVsWVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBMT09QXHJcbiAgICogKioqL1xyXG4gIHVwZGF0ZSAoKSB7XHJcbiAgICB0aGlzLnkudGFyZ2V0ICs9IHRoaXMuc3BlZWRBdXRvU2Nyb2xsXHJcbiAgICB0aGlzLnNwZWVkLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc3BlZWQuY3VycmVudCwgdGhpcy5zcGVlZC50YXJnZXQsIHRoaXMuc3BlZWQubGVycClcclxuXHJcbiAgICB0aGlzLnguY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy54LmN1cnJlbnQsIHRoaXMueC50YXJnZXQsIHRoaXMueC5sZXJwKVxyXG4gICAgdGhpcy55LmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMueS5jdXJyZW50LCB0aGlzLnkudGFyZ2V0LCB0aGlzLnkubGVycClcclxuXHJcbiAgICBpZiAodGhpcy5zY3JvbGwueSA8IHRoaXMueS5jdXJyZW50KSB7XHJcbiAgICAgIHRoaXMueS5kaXJlY3Rpb24gPSAndG9wJ1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbC55ID4gdGhpcy55LmN1cnJlbnQpIHtcclxuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICdib3R0b20nXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC5jdXJyZW50XHJcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LmN1cnJlbnRcclxuXHJcbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3Qgb2Zmc2V0WSA9IHRoaXMuc2l6ZXMuaGVpZ2h0ICogMC42XHJcbiAgICAgIGNvbnN0IHNjYWxlWSA9IG1lZGlhLm1lc2guc2NhbGUueSAvIDJcclxuXHJcbiAgICAgIGlmIChpbmRleCAlIDIgPT09IDApIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxpZXIgPSAtMVxyXG4gICAgICB9IGVsc2UgaWYgKGluZGV4ICUgMiA9PT0gMSkge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGllciA9IDFcclxuICAgICAgfVxyXG5cclxuICAgICAgbWVkaWEudXBkYXRlKG1lZGlhLCB0aGlzLnNjcm9sbCwgdGhpcy5zcGVlZC5jdXJyZW50LCB0aGlzLm11bHRpcGxpZXIsIHRoaXMueS5kaXJlY3Rpb24sIHRoaXMuZ2FsbGVyeVNpemVzLmhlaWdodCwgb2Zmc2V0WSwgc2NhbGVZLCB0aGlzLnkpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBERVNUUk9ZXHJcbiAgICogKioqL1xyXG4gIGRlc3Ryb3kgKCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxyXG4gIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI3MTQxMDFlNjk0M2VhZjAxZWJlN1wiKSJdLCJuYW1lcyI6WyJQbGFuZSIsIlRyYW5zZm9ybSIsIkdTQVAiLCJtYXAiLCJNZWRpYSIsImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwiZ3JvdXAiLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhc0VsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInNsb3RSb2xsIiwiYnV0dG9uUm9sbCIsInNwZWVkQXV0b1Njcm9sbCIsIngiLCJjdXJyZW50IiwidGFyZ2V0IiwibGVycCIsInkiLCJzY3JvbGxDdXJyZW50Iiwic2Nyb2xsIiwic3BlZWQiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJvblJlc2l6ZSIsImNyZWF0ZUJ1dHRvblJvbGwiLCJzZXRQYXJlbnQiLCJzaG93IiwiZ2VvbWV0cnkiLCJoZWlnaHRTZWdtZW50cyIsIndpZHRoU2VnbWVudHMiLCJtZWRpYXMiLCJlbGVtZW50IiwiaW5kZXgiLCJtZWRpYUFzc2V0cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfIiwiTWF0aCIsInJhbmRvbSIsIm1lZGlhIiwiYm91bmRzIiwidG9wIiwiYWx0IiwiY29uc29sZSIsImxvZyIsImhlaWdodCIsInNvcnQiLCJhIiwiYiIsImNsb3Nlc3QiLCJyZWR1Y2UiLCJhYnMiLCJpbm5lclRleHQiLCJoaWRlIiwiZXZlbnQiLCJnYWxsZXJ5Qm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2FsbGVyeVNpemVzIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJvblRvdWNoRG93biIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWCIsInBpeGVsWSIsInVwZGF0ZSIsInV0aWxzIiwiaW50ZXJwb2xhdGUiLCJkaXJlY3Rpb24iLCJvZmZzZXRZIiwic2NhbGVZIiwibWVzaCIsInNjYWxlIiwibXVsdGlwbGllciIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCJdLCJzb3VyY2VSb290IjoiIn0=