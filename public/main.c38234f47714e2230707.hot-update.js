"use strict";
self["webpackHotUpdateboilerplate_prismic"]("main",{

/***/ "./app/components/Canvas/Home/Media.js":
/*!*********************************************!*\
  !*** ./app/components/Canvas/Home/Media.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Program.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Mesh.js");
/* harmony import */ var shaders_home_fragment_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shaders/home-fragment.glsl */ "./app/shaders/home-fragment.glsl");
/* harmony import */ var shaders_home_vertex_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shaders/home-vertex.glsl */ "./app/shaders/home-vertex.glsl");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {
  constructor({
    element,
    geometry,
    gl,
    index,
    scene,
    sizes
  }) {
    this.element = element;
    this.geometry = geometry;
    this.gl = gl;
    this.index = index;
    this.scene = scene;
    this.sizes = sizes;
    this.extra = {
      x: 0,
      y: 0
    };
    this.createTexture();
    this.createProgram();
    this.createMesh();
    this.createBounds({
      sizes: this.sizes
    });
  }
  createTexture() {
    const image = this.element;
    this.texture = window.TEXTURES[image.getAttribute('data-src')];
  }
  createProgram() {
    this.program = new ogl__WEBPACK_IMPORTED_MODULE_2__.Program(this.gl, {
      fragment: shaders_home_fragment_glsl__WEBPACK_IMPORTED_MODULE_0__["default"],
      vertex: shaders_home_vertex_glsl__WEBPACK_IMPORTED_MODULE_1__["default"],
      uniforms: {
        uAlpha: {
          value: 0
        },
        uSpeed: {
          value: 0
        },
        uViewportSizes: {
          value: [this.sizes.width, this.sizes.height]
        },
        tMap: {
          value: this.texture
        }
      }
    });
  }
  createMesh() {
    this.mesh = new ogl__WEBPACK_IMPORTED_MODULE_3__.Mesh(this.gl, {
      geometry: this.geometry,
      program: this.program
    });
    this.mesh.setParent(this.scene);

    // this.mesh.rotation.z = -Math.PI / 4
  }

  createBounds({
    sizes
  }) {
    this.sizes = sizes;
    this.bounds = this.element.getBoundingClientRect();
    this.updateScale(sizes);
    this.updateX();
    this.updateY();
  }

  /****
   * ANIMATIONS
   * ***/
  show() {
    gsap__WEBPACK_IMPORTED_MODULE_4__["default"].fromTo(this.program.uniforms.uAlpha, {
      value: 0
    }, {
      value: 1
    });
  }
  hide() {
    gsap__WEBPACK_IMPORTED_MODULE_4__["default"].to(this.program.uniforms.uAlpha, {
      value: 0
    });
  }

  /****
   * EVENTS
   * ***/
  onResize(sizes, scroll) {
    this.extra = {
      x: 0,
      y: 0
    };
    this.createBounds(sizes);
    this.updateX(scroll && scroll.x);
    this.updateY(scroll && scroll.y);
  }

  /****
   * LOOP
   * ***/
  updateScale() {
    this.width = this.bounds.width / window.innerWidth;
    this.height = this.bounds.height / window.innerHeight;
    this.mesh.scale.x = this.sizes.width * this.width;
    this.mesh.scale.y = this.sizes.height * this.height;
  }
  updateX(x = 0) {
    this.x = (this.bounds.left + x) / window.innerWidth;
    this.mesh.position.x = -this.sizes.width / 2 + this.mesh.scale.x / 2 + this.x * this.sizes.width + this.extra.x;
  }
  updateY(media, y = 0, multiplier, direction, height, offsetY, scaleY) {
    // console.log(multiplier)
    this.y = (this.bounds.top + y) / window.innerHeight;
    this.mesh.position.y = (this.sizes.height / 2 - this.mesh.scale.y / 2 - this.y * this.sizes.height + this.extra.y) * multiplier;

    // console.log(direction, scaleY, offsetY, height, this.mesh)

    if (multiplier === 1) {
      if (direction === 'top') {
        const y = media.mesh.position.y + scaleY;
        if (y < -offsetY) {
          media.extra.y += height;
        }
      } else if (direction === 'bottom') {
        const y = media.mesh.position.y - scaleY;
        if (y > offsetY) {
          media.extra.y -= height;
        }
      }
    } else if (multiplier === -1) {
      console.log('inverted');
      if (direction === 'top') {
        const y = media.mesh.position.y - scaleY;
        if (y > offsetY) {
          media.extra.y -= height;
        }
      } else if (direction === 'bottom') {
        const y = media.mesh.position.y + scaleY;
        if (y < -offsetY) {
          media.extra.y += height;
        }
      }
    }
  }
  update(media, scroll, speed, multiplier, direction, height, offsetY, scaleY) {
    this.updateX(scroll.x);
    this.updateY(media, scroll.y, multiplier, direction, height, offsetY, scaleY);
    this.program.uniforms.uSpeed.value = speed;
  }
});

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("35d74af4be9d8ad0bab0")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5jMzgyMzRmNDc3MTRlMjIzMDcwNy5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1QjtBQUNZO0FBRWM7QUFDSjtBQUU3QyxpRUFBZSxNQUFNO0VBQ25CSyxXQUFXQSxDQUFFO0lBQUVDLE9BQU87SUFBRUMsUUFBUTtJQUFFQyxFQUFFO0lBQUVDLEtBQUs7SUFBRUMsS0FBSztJQUFFQztFQUFNLENBQUMsRUFBRTtJQUMzRCxJQUFJLENBQUNMLE9BQU8sR0FBR0EsT0FBTztJQUN0QixJQUFJLENBQUNDLFFBQVEsR0FBR0EsUUFBUTtJQUN4QixJQUFJLENBQUNDLEVBQUUsR0FBR0EsRUFBRTtJQUNaLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBRWxCLElBQUksQ0FBQ0MsS0FBSyxHQUFHO01BQ1hDLENBQUMsRUFBRSxDQUFDO01BQ0pDLENBQUMsRUFBRTtJQUNMLENBQUM7SUFFRCxJQUFJLENBQUNDLGFBQWEsQ0FBQyxDQUFDO0lBQ3BCLElBQUksQ0FBQ0MsYUFBYSxDQUFDLENBQUM7SUFDcEIsSUFBSSxDQUFDQyxVQUFVLENBQUMsQ0FBQztJQUNqQixJQUFJLENBQUNDLFlBQVksQ0FBQztNQUNoQlAsS0FBSyxFQUFFLElBQUksQ0FBQ0E7SUFDZCxDQUFDLENBQUM7RUFDSjtFQUVBSSxhQUFhQSxDQUFBLEVBQUk7SUFDZixNQUFNSSxLQUFLLEdBQUcsSUFBSSxDQUFDYixPQUFPO0lBRTFCLElBQUksQ0FBQ2MsT0FBTyxHQUFHQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0gsS0FBSyxDQUFDSSxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7RUFDaEU7RUFFQVAsYUFBYUEsQ0FBQSxFQUFJO0lBQ2YsSUFBSSxDQUFDUSxPQUFPLEdBQUcsSUFBSXRCLHdDQUFPLENBQUMsSUFBSSxDQUFDTSxFQUFFLEVB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O0VBQ0Y7RUFFQTRCLE1BQU1BLENBQUVSLEtBQUssRUFBRU4sTUFBTSxFQUFFZSxLQUFLLEVBQUVSLFVBQVUsRUFBRUMsU0FBUyxFQUFFdEIsTUFBTSxFQUFFdUIsT0FBTyxFQUFFQyxNQUFNLEVBQUU7SUFDNUUsSUFBSSxDQUFDakIsT0FBTyxDQUFDTyxNQUFNLENBQUNoQyxDQUFDLENBQUM7SUFDdEIsSUFBSSxDQUFDMEIsT0FBTyxDQUFDWSxLQUFLLEVBQUVOLE1BQU0sQ0FBQy9CLENBQUMsRUFBRXNDLFVBQVUsRUFBRUMsU0FBUyxFQUFFdEIsTUFBTSxFQUFFdUIsT0FBTyxFQUFFQyxNQUFNLENBQUM7SUFFN0UsSUFBSSxDQUFDL0IsT0FBTyxDQUFDQyxRQUFRLENBQUNHLE1BQU0sQ0FBQ0QsS0FBSyxHQUFHaUMsS0FBSztFQUM1QztBQUNGOzs7Ozs7OztVQ2xLQSIsInNvdXJjZXMiOlsid2VicGFjazovL2JvaWxlcnBsYXRlLXByaXNtaWMvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvSG9tZS9NZWRpYS5qcyIsIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS1wcmlzbWljL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xyXG5pbXBvcnQgeyBNZXNoLCBQcm9ncmFtIH0gZnJvbSAnb2dsJ1xyXG5cclxuaW1wb3J0IGZyYWdtZW50IGZyb20gJ3NoYWRlcnMvaG9tZS1mcmFnbWVudC5nbHNsJ1xyXG5pbXBvcnQgdmVydGV4IGZyb20gJ3NoYWRlcnMvaG9tZS12ZXJ0ZXguZ2xzbCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICBjb25zdHJ1Y3RvciAoeyBlbGVtZW50LCBnZW9tZXRyeSwgZ2wsIGluZGV4LCBzY2VuZSwgc2l6ZXMgfSkge1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxyXG4gICAgdGhpcy5nZW9tZXRyeSA9IGdlb21ldHJ5XHJcbiAgICB0aGlzLmdsID0gZ2xcclxuICAgIHRoaXMuaW5kZXggPSBpbmRleFxyXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lXHJcbiAgICB0aGlzLnNpemVzID0gc2l6ZXNcclxuXHJcbiAgICB0aGlzLmV4dHJhID0ge1xyXG4gICAgICB4OiAwLFxyXG4gICAgICB5OiAwXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVUZXh0dXJlKClcclxuICAgIHRoaXMuY3JlYXRlUHJvZ3JhbSgpXHJcbiAgICB0aGlzLmNyZWF0ZU1lc2goKVxyXG4gICAgdGhpcy5jcmVhdGVCb3VuZHMoe1xyXG4gICAgICBzaXplczogdGhpcy5zaXplc1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNyZWF0ZVRleHR1cmUgKCkge1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLmVsZW1lbnRcclxuXHJcbiAgICB0aGlzLnRleHR1cmUgPSB3aW5kb3cuVEVYVFVSRVNbaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpXVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlUHJvZ3JhbSAoKSB7XHJcbiAgICB0aGlzLnByb2dyYW0gPSBuZXcgUHJvZ3JhbSh0aGlzLmdsLCB7XHJcbiAgICAgIGZyYWdtZW50LFxyXG4gICAgICB2ZXJ0ZXgsXHJcbiAgICAgIHVuaWZvcm1zOiB7XHJcbiAgICAgICAgdUFscGhhOiB7IHZhbHVlOiAwIH0sXHJcbiAgICAgICAgdVNwZWVkOiB7IHZhbHVlOiAwIH0sXHJcbiAgICAgICAgdVZpZXdwb3J0U2l6ZXM6IHsgdmFsdWU6IFt0aGlzLnNpemVzLndpZHRoLCB0aGlzLnNpemVzLmhlaWdodF0gfSxcclxuICAgICAgICB0TWFwOiB7IHZhbHVlOiB0aGlzLnRleHR1cmUgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlTWVzaCAoKSB7XHJcbiAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaCh0aGlzLmdsLCB7XHJcbiAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxyXG4gICAgICBwcm9ncmFtOiB0aGlzLnByb2dyYW1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5tZXNoLnNldFBhcmVudCh0aGlzLnNjZW5lKVxyXG5cclxuICAgIC8vIHRoaXMubWVzaC5yb3RhdGlvbi56ID0gLU1hdGguUEkgLyA0XHJcbiAgfVxyXG5cclxuICBjcmVhdGVCb3VuZHMgKHsgc2l6ZXMgfSkge1xyXG4gICAgdGhpcy5zaXplcyA9IHNpemVzXHJcblxyXG4gICAgdGhpcy5ib3VuZHMgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVNjYWxlKHNpemVzKVxyXG4gICAgdGhpcy51cGRhdGVYKClcclxuICAgIHRoaXMudXBkYXRlWSgpXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIEFOSU1BVElPTlNcclxuICAgKiAqKiovXHJcbiAgc2hvdyAoKSB7XHJcbiAgICBHU0FQLmZyb21Ubyh0aGlzLnByb2dyYW0udW5pZm9ybXMudUFscGhhLCB7XHJcbiAgICAgIHZhbHVlOiAwXHJcbiAgICB9LCB7XHJcbiAgICAgIHZhbHVlOiAxXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaGlkZSAoKSB7XHJcbiAgICBHU0FQLnRvKHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51QWxwaGEsIHtcclxuICAgICAgdmFsdWU6IDBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIEVWRU5UU1xyXG4gICAqICoqKi9cclxuICBvblJlc2l6ZSAoc2l6ZXMsIHNjcm9sbCkge1xyXG4gICAgdGhpcy5leHRyYSA9IHtcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3JlYXRlQm91bmRzKHNpemVzKVxyXG4gICAgdGhpcy51cGRhdGVYKHNjcm9sbCAmJiBzY3JvbGwueClcclxuICAgIHRoaXMudXBkYXRlWShzY3JvbGwgJiYgc2Nyb2xsLnkpXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIExPT1BcclxuICAgKiAqKiovXHJcbiAgdXBkYXRlU2NhbGUgKCkge1xyXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGhcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5ib3VuZHMuaGVpZ2h0IC8gd2luZG93LmlubmVySGVpZ2h0XHJcblxyXG4gICAgdGhpcy5tZXNoLnNjYWxlLnggPSB0aGlzLnNpemVzLndpZHRoICogdGhpcy53aWR0aFxyXG4gICAgdGhpcy5tZXNoLnNjYWxlLnkgPSB0aGlzLnNpemVzLmhlaWdodCAqIHRoaXMuaGVpZ2h0XHJcbiAgfVxyXG5cclxuICB1cGRhdGVYICh4ID0gMCkge1xyXG4gICAgdGhpcy54ID0gKHRoaXMuYm91bmRzLmxlZnQgKyB4KSAvIHdpbmRvdy5pbm5lcldpZHRoXHJcblxyXG4gICAgdGhpcy5tZXNoLnBvc2l0aW9uLnggPSAoLXRoaXMuc2l6ZXMud2lkdGggLyAyKSArICh0aGlzLm1lc2guc2NhbGUueCAvIDIpICsgKHRoaXMueCAqIHRoaXMuc2l6ZXMud2lkdGgpICsgdGhpcy5leHRyYS54XHJcbiAgfVxyXG5cclxuICB1cGRhdGVZIChtZWRpYSwgeSA9IDAsIG11bHRpcGxpZXIsIGRpcmVjdGlvbiwgaGVpZ2h0LCBvZmZzZXRZLCBzY2FsZVkpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKG11bHRpcGxpZXIpXHJcbiAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wICsgeSkgLyB3aW5kb3cuaW5uZXJIZWlnaHRcclxuXHJcbiAgICB0aGlzLm1lc2gucG9zaXRpb24ueSA9ICgodGhpcy5zaXplcy5oZWlnaHQgLyAyKSAtICh0aGlzLm1lc2guc2NhbGUueSAvIDIpIC0gKHRoaXMueSAqIHRoaXMuc2l6ZXMuaGVpZ2h0KSArIHRoaXMuZXh0cmEueSkgKiBtdWx0aXBsaWVyXHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coZGlyZWN0aW9uLCBzY2FsZVksIG9mZnNldFksIGhlaWdodCwgdGhpcy5tZXNoKVxyXG5cclxuICAgIGlmIChtdWx0aXBsaWVyID09PSAxKSB7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSArIHNjYWxlWVxyXG5cclxuICAgICAgICBpZiAoeSA8IC1vZmZzZXRZKSB7XHJcbiAgICAgICAgICBtZWRpYS5leHRyYS55ICs9IGhlaWdodFxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSAtIHNjYWxlWVxyXG5cclxuICAgICAgICBpZiAoeSA+IG9mZnNldFkpIHtcclxuICAgICAgICAgIG1lZGlhLmV4dHJhLnkgLT0gaGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG11bHRpcGxpZXIgPT09IC0xKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdpbnZlcnRlZCcpXHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSAtIHNjYWxlWVxyXG5cclxuICAgICAgICBpZiAoeSA+IG9mZnNldFkpIHtcclxuICAgICAgICAgIG1lZGlhLmV4dHJhLnkgLT0gaGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICBjb25zdCB5ID0gbWVkaWEubWVzaC5wb3NpdGlvbi55ICsgc2NhbGVZXHJcblxyXG4gICAgICAgIGlmICh5IDwgLW9mZnNldFkpIHtcclxuICAgICAgICAgIG1lZGlhLmV4dHJhLnkgKz0gaGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGUgKG1lZGlhLCBzY3JvbGwsIHNwZWVkLCBtdWx0aXBsaWVyLCBkaXJlY3Rpb24sIGhlaWdodCwgb2Zmc2V0WSwgc2NhbGVZKSB7XHJcbiAgICB0aGlzLnVwZGF0ZVgoc2Nyb2xsLngpXHJcbiAgICB0aGlzLnVwZGF0ZVkobWVkaWEsIHNjcm9sbC55LCBtdWx0aXBsaWVyLCBkaXJlY3Rpb24sIGhlaWdodCwgb2Zmc2V0WSwgc2NhbGVZKVxyXG5cclxuICAgIHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51U3BlZWQudmFsdWUgPSBzcGVlZFxyXG4gIH1cclxufVxyXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCIzNWQ3NGFmNGJlOWQ4YWQwYmFiMFwiKSJdLCJuYW1lcyI6WyJHU0FQIiwiTWVzaCIsIlByb2dyYW0iLCJmcmFnbWVudCIsInZlcnRleCIsImNvbnN0cnVjdG9yIiwiZWxlbWVudCIsImdlb21ldHJ5IiwiZ2wiLCJpbmRleCIsInNjZW5lIiwic2l6ZXMiLCJleHRyYSIsIngiLCJ5IiwiY3JlYXRlVGV4dHVyZSIsImNyZWF0ZVByb2dyYW0iLCJjcmVhdGVNZXNoIiwiY3JlYXRlQm91bmRzIiwiaW1hZ2UiLCJ0ZXh0dXJlIiwid2luZG93IiwiVEVYVFVSRVMiLCJnZXRBdHRyaWJ1dGUiLCJwcm9ncmFtIiwidW5pZm9ybXMiLCJ1QWxwaGEiLCJ2YWx1ZSIsInVTcGVlZCIsInVWaWV3cG9ydFNpemVzIiwid2lkdGgiLCJoZWlnaHQiLCJ0TWFwIiwibWVzaCIsInNldFBhcmVudCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwZGF0ZVNjYWxlIiwidXBkYXRlWCIsInVwZGF0ZVkiLCJzaG93IiwiZnJvbVRvIiwiaGlkZSIsInRvIiwib25SZXNpemUiLCJzY3JvbGwiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJzY2FsZSIsImxlZnQiLCJwb3NpdGlvbiIsIm1lZGlhIiwibXVsdGlwbGllciIsImRpcmVjdGlvbiIsIm9mZnNldFkiLCJzY2FsZVkiLCJ0b3AiLCJjb25zb2xlIiwibG9nIiwidXBkYXRlIiwic3BlZWQiXSwic291cmNlUm9vdCI6IiJ9