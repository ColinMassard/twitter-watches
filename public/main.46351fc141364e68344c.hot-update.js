"use strict";
self["webpackHotUpdateboilerplate_prismic"]("main",{

/***/ "./app/components/Canvas/Home/Media.js":
/*!*********************************************!*\
  !*** ./app/components/Canvas/Home/Media.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Program.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Mesh.js");
/* harmony import */ var shaders_home_fragment_glsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! shaders/home-fragment.glsl */ "./app/shaders/home-fragment.glsl");
/* harmony import */ var shaders_home_vertex_glsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shaders/home-vertex.glsl */ "./app/shaders/home-vertex.glsl");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {
  constructor({
    element,
    geometry,
    gl,
    index,
    scene,
    sizes
  }) {
    this.element = element;
    this.geometry = geometry;
    this.gl = gl;
    this.index = index;
    this.scene = scene;
    this.sizes = sizes;
    this.extra = {
      x: 0,
      y: 0
    };
    this.createTexture();
    this.createProgram();
    this.createMesh();
    this.createBounds({
      sizes: this.sizes
    });
  }
  createTexture() {
    const image = this.element;
    this.texture = window.TEXTURES[image.getAttribute('data-src')];
  }
  createProgram() {
    this.program = new ogl__WEBPACK_IMPORTED_MODULE_2__.Program(this.gl, {
      fragment: shaders_home_fragment_glsl__WEBPACK_IMPORTED_MODULE_0__["default"],
      vertex: shaders_home_vertex_glsl__WEBPACK_IMPORTED_MODULE_1__["default"],
      uniforms: {
        uAlpha: {
          value: 0
        },
        uSpeed: {
          value: 0
        },
        uViewportSizes: {
          value: [this.sizes.width, this.sizes.height]
        },
        tMap: {
          value: this.texture
        }
      }
    });
  }
  createMesh() {
    this.mesh = new ogl__WEBPACK_IMPORTED_MODULE_3__.Mesh(this.gl, {
      geometry: this.geometry,
      program: this.program
    });
    this.mesh.setParent(this.scene);

    // this.mesh.rotation.z = -Math.PI / 4
  }

  createBounds({
    sizes
  }) {
    this.sizes = sizes;
    this.bounds = this.element.getBoundingClientRect();
    this.updateScale(sizes);
    this.updateX();
    this.updateY();
  }

  /****
   * ANIMATIONS
   * ***/
  show() {
    gsap__WEBPACK_IMPORTED_MODULE_4__["default"].fromTo(this.program.uniforms.uAlpha, {
      value: 0
    }, {
      value: 1
    });
  }
  hide() {
    gsap__WEBPACK_IMPORTED_MODULE_4__["default"].to(this.program.uniforms.uAlpha, {
      value: 0
    });
  }

  /****
   * EVENTS
   * ***/
  onResize(sizes, scroll) {
    this.extra = {
      x: 0,
      y: 0
    };
    this.createBounds(sizes);
    this.updateX(scroll && scroll.x);
    this.updateY(scroll && scroll.y);
  }

  /****
   * LOOP
   * ***/
  updateScale() {
    this.width = this.bounds.width / window.innerWidth;
    this.height = this.bounds.height / window.innerHeight;
    this.mesh.scale.x = this.sizes.width * this.width;
    this.mesh.scale.y = this.sizes.height * this.height;
  }
  updateX(x = 0) {
    this.x = (this.bounds.left + x) / window.innerWidth;
    this.mesh.position.x = -this.sizes.width / 2 + this.mesh.scale.x / 2 + this.x * this.sizes.width + this.extra.x;
  }
  updateY(media, y = 0, multiplier, direction, height, offsetY, scaleY) {
    // console.log(multiplier)
    this.y = (this.bounds.top + y) / window.innerHeight;
    this.mesh.position.y = (this.sizes.height / 2 - this.mesh.scale.y / 2 - this.y * this.sizes.height + this.extra.y) * multiplier;
    if (multiplier === 1) {
      if (direction === 'top') {
        const y = media.mesh.position.y + scaleY;
        if (y < -offsetY) {
          media.extra.y += height;
        }
      } else if (direction === 'bottom') {
        const y = media.mesh.position.y - scaleY;
        if (y > offsetY) {
          media.extra.y -= height;
        }
      }
    } else if (multiplier === -1) {
      if (direction === 'top') {
        const y = media.mesh.position.y - scaleY;
        console.log(y, offsetY);
        if (y > offsetY) {
          media.extra.y += height;
        }
      } else if (direction === 'bottom') {
        const y = media.mesh.position.y + scaleY;
        if (y < -offsetY) {
          media.extra.y -= height;
        }
      }
    }
  }
  update(media, scroll, speed, multiplier, direction, height, offsetY, scaleY) {
    this.updateX(scroll.x);
    this.updateY(media, scroll.y, multiplier, direction, height, offsetY, scaleY);
    this.program.uniforms.uSpeed.value = speed;
  }
});

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("6db6598c7dcc8c913862")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi40NjM1MWZjMTQxMzY0ZTY4MzQ0Yy5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1QjtBQUNZO0FBRWM7QUFDSjtBQUU3QyxpRUFBZSxNQUFNO0VBQ25CSyxXQUFXQSxDQUFFO0lBQUVDLE9BQU87SUFBRUMsUUFBUTtJQUFFQyxFQUFFO0lBQUVDLEtBQUs7SUFBRUMsS0FBSztJQUFFQztFQUFNLENBQUMsRUFBRTtJQUMzRCxJQUFJLENBQUNMLE9BQU8sR0FBR0EsT0FBTztJQUN0QixJQUFJLENBQUNDLFFBQVEsR0FBR0EsUUFBUTtJQUN4QixJQUFJLENBQUNDLEVBQUUsR0FBR0EsRUFBRTtJQUNaLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBRWxCLElBQUksQ0FBQ0MsS0FBSyxHQUFHO01BQ1hDLENBQUMsRUFBRSxDQUFDO01BQ0pDLENBQUMsRUFBRTtJQUNMLENBQUM7SUFFRCxJQUFJLENBQUNDLGFBQWEsQ0FBQyxDQUFDO0lBQ3BCLElBQUksQ0FBQ0MsYUFBYSxDQUFDLENBQUM7SUFDcEIsSUFBSSxDQUFDQyxVQUFVLENBQUMsQ0FBQztJQUNqQixJQUFJLENBQUNDLFlBQVksQ0FBQztNQUNoQlAsS0FBSyxFQUFFLElBQUksQ0FBQ0E7SUFDZCxDQUFDLENBQUM7RUFDSjtFQUVBSSxhQUFhQSxDQUFBLEVBQUk7SUFDZixNQUFNSSxLQUFLLEdBQUcsSUFBSSxDQUFDYixPQUFPO0lBRTFCLElBQUksQ0FBQ2MsT0FBTyxHQUFHQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0gsS0FBSyxDQUFDSSxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7RUFDaEU7RUFFQVAsYUFBYUEsQ0FBQSxFQUFJO0lBQ2YsSUFBSSxDQUFDUSxPQUFPLEdBQUcsSUFBSXRCLHdDQUFPLENBQUMsSUFBSSxDQUFDTSxFQUFFLEVB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Q0Y7SUFDRjtFQUNGO0VBRUE0QixNQUFNQSxDQUFFUixLQUFLLEVBQUVOLE1BQU0sRUFBRWUsS0FBSyxFQUFFUixVQUFVLEVBQUVDLFNBQVMsRUFBRXRCLE1BQU0sRUFBRXVCLE9BQU8sRUFBRUMsTUFBTSxFQUFFO0lBQzVFLElBQUksQ0FBQ2pCLE9BQU8sQ0FBQ08sTUFBTSxDQUFDaEMsQ0FBQyxDQUFDO0lBQ3RCLElBQUksQ0FBQzBCLE9BQU8sQ0FBQ1ksS0FBSyxFQUFFTixNQUFNLENBQUMvQixDQUFDLEVBQUVzQyxVQUFVLEVBQUVDLFNBQVMsRUFBRXRCLE1BQU0sRUFBRXVCLE9BQU8sRUFBRUMsTUFBTSxDQUFDO0lBRTdFLElBQUksQ0FBQy9CLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDRyxNQUFNLENBQUNELEtBQUssR0FBR2lDLEtBQUs7RUFDNUM7QUFDRjs7Ozs7Ozs7VUNoS0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS1wcmlzbWljLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0hvbWUvTWVkaWEuanMiLCJ3ZWJwYWNrOi8vYm9pbGVycGxhdGUtcHJpc21pYy93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcclxuaW1wb3J0IHsgTWVzaCwgUHJvZ3JhbSB9IGZyb20gJ29nbCdcclxuXHJcbmltcG9ydCBmcmFnbWVudCBmcm9tICdzaGFkZXJzL2hvbWUtZnJhZ21lbnQuZ2xzbCdcclxuaW1wb3J0IHZlcnRleCBmcm9tICdzaGFkZXJzL2hvbWUtdmVydGV4Lmdsc2wnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IgKHsgZWxlbWVudCwgZ2VvbWV0cnksIGdsLCBpbmRleCwgc2NlbmUsIHNpemVzIH0pIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcclxuICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeVxyXG4gICAgdGhpcy5nbCA9IGdsXHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXhcclxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG4gICAgdGhpcy5zaXplcyA9IHNpemVzXHJcblxyXG4gICAgdGhpcy5leHRyYSA9IHtcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3JlYXRlVGV4dHVyZSgpXHJcbiAgICB0aGlzLmNyZWF0ZVByb2dyYW0oKVxyXG4gICAgdGhpcy5jcmVhdGVNZXNoKClcclxuICAgIHRoaXMuY3JlYXRlQm91bmRzKHtcclxuICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjcmVhdGVUZXh0dXJlICgpIHtcclxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5lbGVtZW50XHJcblxyXG4gICAgdGhpcy50ZXh0dXJlID0gd2luZG93LlRFWFRVUkVTW2ltYWdlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKV1cclxuICB9XHJcblxyXG4gIGNyZWF0ZVByb2dyYW0gKCkge1xyXG4gICAgdGhpcy5wcm9ncmFtID0gbmV3IFByb2dyYW0odGhpcy5nbCwge1xyXG4gICAgICBmcmFnbWVudCxcclxuICAgICAgdmVydGV4LFxyXG4gICAgICB1bmlmb3Jtczoge1xyXG4gICAgICAgIHVBbHBoYTogeyB2YWx1ZTogMCB9LFxyXG4gICAgICAgIHVTcGVlZDogeyB2YWx1ZTogMCB9LFxyXG4gICAgICAgIHVWaWV3cG9ydFNpemVzOiB7IHZhbHVlOiBbdGhpcy5zaXplcy53aWR0aCwgdGhpcy5zaXplcy5oZWlnaHRdIH0sXHJcbiAgICAgICAgdE1hcDogeyB2YWx1ZTogdGhpcy50ZXh0dXJlIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNyZWF0ZU1lc2ggKCkge1xyXG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2godGhpcy5nbCwge1xyXG4gICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcclxuICAgICAgcHJvZ3JhbTogdGhpcy5wcm9ncmFtXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMubWVzaC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcclxuXHJcbiAgICAvLyB0aGlzLm1lc2gucm90YXRpb24ueiA9IC1NYXRoLlBJIC8gNFxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQm91bmRzICh7IHNpemVzIH0pIHtcclxuICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xyXG5cclxuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcblxyXG4gICAgdGhpcy51cGRhdGVTY2FsZShzaXplcylcclxuICAgIHRoaXMudXBkYXRlWCgpXHJcbiAgICB0aGlzLnVwZGF0ZVkoKVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBBTklNQVRJT05TXHJcbiAgICogKioqL1xyXG4gIHNob3cgKCkge1xyXG4gICAgR1NBUC5mcm9tVG8odGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVBbHBoYSwge1xyXG4gICAgICB2YWx1ZTogMFxyXG4gICAgfSwge1xyXG4gICAgICB2YWx1ZTogMVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhpZGUgKCkge1xyXG4gICAgR1NBUC50byh0aGlzLnByb2dyYW0udW5pZm9ybXMudUFscGhhLCB7XHJcbiAgICAgIHZhbHVlOiAwXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBFVkVOVFNcclxuICAgKiAqKiovXHJcbiAgb25SZXNpemUgKHNpemVzLCBzY3JvbGwpIHtcclxuICAgIHRoaXMuZXh0cmEgPSB7XHJcbiAgICAgIHg6IDAsXHJcbiAgICAgIHk6IDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNyZWF0ZUJvdW5kcyhzaXplcylcclxuICAgIHRoaXMudXBkYXRlWChzY3JvbGwgJiYgc2Nyb2xsLngpXHJcbiAgICB0aGlzLnVwZGF0ZVkoc2Nyb2xsICYmIHNjcm9sbC55KVxyXG4gIH1cclxuXHJcbiAgLyoqKipcclxuICAgKiBMT09QXHJcbiAgICogKioqL1xyXG4gIHVwZGF0ZVNjYWxlICgpIHtcclxuICAgIHRoaXMud2lkdGggPSB0aGlzLmJvdW5kcy53aWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoXHJcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuYm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodFxyXG5cclxuICAgIHRoaXMubWVzaC5zY2FsZS54ID0gdGhpcy5zaXplcy53aWR0aCAqIHRoaXMud2lkdGhcclxuICAgIHRoaXMubWVzaC5zY2FsZS55ID0gdGhpcy5zaXplcy5oZWlnaHQgKiB0aGlzLmhlaWdodFxyXG4gIH1cclxuXHJcbiAgdXBkYXRlWCAoeCA9IDApIHtcclxuICAgIHRoaXMueCA9ICh0aGlzLmJvdW5kcy5sZWZ0ICsgeCkgLyB3aW5kb3cuaW5uZXJXaWR0aFxyXG5cclxuICAgIHRoaXMubWVzaC5wb3NpdGlvbi54ID0gKC10aGlzLnNpemVzLndpZHRoIC8gMikgKyAodGhpcy5tZXNoLnNjYWxlLnggLyAyKSArICh0aGlzLnggKiB0aGlzLnNpemVzLndpZHRoKSArIHRoaXMuZXh0cmEueFxyXG4gIH1cclxuXHJcbiAgdXBkYXRlWSAobWVkaWEsIHkgPSAwLCBtdWx0aXBsaWVyLCBkaXJlY3Rpb24sIGhlaWdodCwgb2Zmc2V0WSwgc2NhbGVZKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhtdWx0aXBsaWVyKVxyXG4gICAgdGhpcy55ID0gKHRoaXMuYm91bmRzLnRvcCArIHkpIC8gd2luZG93LmlubmVySGVpZ2h0XHJcblxyXG4gICAgdGhpcy5tZXNoLnBvc2l0aW9uLnkgPSAoKHRoaXMuc2l6ZXMuaGVpZ2h0IC8gMikgLSAodGhpcy5tZXNoLnNjYWxlLnkgLyAyKSAtICh0aGlzLnkgKiB0aGlzLnNpemVzLmhlaWdodCkgKyB0aGlzLmV4dHJhLnkpICogbXVsdGlwbGllclxyXG5cclxuICAgIGlmIChtdWx0aXBsaWVyID09PSAxKSB7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSArIHNjYWxlWVxyXG5cclxuICAgICAgICBpZiAoeSA8IC1vZmZzZXRZKSB7XHJcbiAgICAgICAgICBtZWRpYS5leHRyYS55ICs9IGhlaWdodFxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSAtIHNjYWxlWVxyXG5cclxuICAgICAgICBpZiAoeSA+IG9mZnNldFkpIHtcclxuICAgICAgICAgIG1lZGlhLmV4dHJhLnkgLT0gaGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG11bHRpcGxpZXIgPT09IC0xKSB7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSAtIHNjYWxlWVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHksIG9mZnNldFkpXHJcblxyXG4gICAgICAgIGlmICh5ID4gb2Zmc2V0WSkge1xyXG4gICAgICAgICAgbWVkaWEuZXh0cmEueSArPSBoZWlnaHRcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnYm90dG9tJykge1xyXG4gICAgICAgIGNvbnN0IHkgPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnkgKyBzY2FsZVlcclxuXHJcbiAgICAgICAgaWYgKHkgPCAtb2Zmc2V0WSkge1xyXG4gICAgICAgICAgbWVkaWEuZXh0cmEueSAtPSBoZWlnaHRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZSAobWVkaWEsIHNjcm9sbCwgc3BlZWQsIG11bHRpcGxpZXIsIGRpcmVjdGlvbiwgaGVpZ2h0LCBvZmZzZXRZLCBzY2FsZVkpIHtcclxuICAgIHRoaXMudXBkYXRlWChzY3JvbGwueClcclxuICAgIHRoaXMudXBkYXRlWShtZWRpYSwgc2Nyb2xsLnksIG11bHRpcGxpZXIsIGRpcmVjdGlvbiwgaGVpZ2h0LCBvZmZzZXRZLCBzY2FsZVkpXHJcblxyXG4gICAgdGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVTcGVlZC52YWx1ZSA9IHNwZWVkXHJcbiAgfVxyXG59XHJcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjZkYjY1OThjN2RjYzhjOTEzODYyXCIpIl0sIm5hbWVzIjpbIkdTQVAiLCJNZXNoIiwiUHJvZ3JhbSIsImZyYWdtZW50IiwidmVydGV4IiwiY29uc3RydWN0b3IiLCJlbGVtZW50IiwiZ2VvbWV0cnkiLCJnbCIsImluZGV4Iiwic2NlbmUiLCJzaXplcyIsImV4dHJhIiwieCIsInkiLCJjcmVhdGVUZXh0dXJlIiwiY3JlYXRlUHJvZ3JhbSIsImNyZWF0ZU1lc2giLCJjcmVhdGVCb3VuZHMiLCJpbWFnZSIsInRleHR1cmUiLCJ3aW5kb3ciLCJURVhUVVJFUyIsImdldEF0dHJpYnV0ZSIsInByb2dyYW0iLCJ1bmlmb3JtcyIsInVBbHBoYSIsInZhbHVlIiwidVNwZWVkIiwidVZpZXdwb3J0U2l6ZXMiLCJ3aWR0aCIsImhlaWdodCIsInRNYXAiLCJtZXNoIiwic2V0UGFyZW50IiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidXBkYXRlU2NhbGUiLCJ1cGRhdGVYIiwidXBkYXRlWSIsInNob3ciLCJmcm9tVG8iLCJoaWRlIiwidG8iLCJvblJlc2l6ZSIsInNjcm9sbCIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInNjYWxlIiwibGVmdCIsInBvc2l0aW9uIiwibWVkaWEiLCJtdWx0aXBsaWVyIiwiZGlyZWN0aW9uIiwib2Zmc2V0WSIsInNjYWxlWSIsInRvcCIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGUiLCJzcGVlZCJdLCJzb3VyY2VSb290IjoiIn0=