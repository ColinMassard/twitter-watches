"use strict";
self["webpackHotUpdateboilerplate_prismic"]("main",{

/***/ "./app/components/Canvas/Home/index.js":
/*!*********************************************!*\
  !*** ./app/components/Canvas/Home/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/core/Transform.js");
/* harmony import */ var ogl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ogl */ "./node_modules/ogl/src/extras/Plane.js");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/map */ "./node_modules/lodash/map.js");
/* harmony import */ var lodash_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Media__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Media */ "./app/components/Canvas/Home/Media.js");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (class {
  constructor({
    gl,
    scene,
    sizes
  }) {
    this.gl = gl;
    this.scene = scene;
    this.sizes = sizes;
    this.group = new ogl__WEBPACK_IMPORTED_MODULE_2__.Transform();
    this.galleryElement = document.querySelector('.home__gallery');
    this.mediasElements = document.querySelectorAll('.home__gallery__media__image');
    this.slotRoll = document.querySelector('.home__button');
    this.buttonRoll = document.querySelector('.home__button button');
    this.speedAutoScroll = 2;
    this.x = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.y = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.scrollCurrent = {
      x: 0,
      y: 0
    };
    this.scroll = {
      x: 0,
      y: 0
    };
    this.speed = {
      current: 0,
      target: 0,
      lerp: 0.1
    };
    this.createGeometry();
    this.createGallery();
    this.onResize({
      sizes: this.sizes
    });
    this.createButtonRoll(this.slotRoll);
    this.group.setParent(this.scene);
    this.show();
  }
  createGeometry() {
    this.geometry = new ogl__WEBPACK_IMPORTED_MODULE_3__.Plane(this.gl, {
      heightSegments: 20,
      widthSegments: 20
    });
  }
  createGallery() {
    this.medias = lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.mediasElements, (element, index) => {
      return new _Media__WEBPACK_IMPORTED_MODULE_1__["default"]({
        element,
        geometry: this.geometry,
        index,
        gl: this.gl,
        scene: this.group,
        sizes: this.sizes
      });
    });
  }
  createButtonRoll(buttonRoll) {
    let mediaAssets = [];
    buttonRoll.addEventListener('click', _ => {
      // this.scroll.y = 0
      mediaAssets = [];
      this.speedAutoScroll = 0;
      this.y.target = Math.random() * 5000;
      lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, (media, index) => {
        mediaAssets[index] = [media.bounds.top, media.element.alt, media.element.currentSrc];
      });
      const target = this.scroll.y + this.sizes.height / 2;
      console.log(target);

      // mediaAssets.sort(function (a, b) {
      //   return Math.abs(target - a[0]) - Math.abs(target - b[0])
      // })

      console.log(mediaAssets);
      this.buttonRoll.innerText = 'Roll again ?';
    });
  }

  /****
   * ANIMATIONS
   * ***/
  show() {
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.show());
  }
  hide() {
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.hide());
  }

  /****
   * EVENTS
   * ***/
  onResize(event) {
    this.galleryBounds = this.galleryElement.getBoundingClientRect();
    this.sizes = event.sizes;
    this.gallerySizes = {
      height: this.galleryBounds.height / window.innerHeight * this.sizes.height,
      width: this.galleryBounds.width / window.innerWidth * this.sizes.width
    };
    this.scroll.x = this.x.target = 0;
    this.scroll.y = this.y.target = 0;
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, media => media.onResize(event, this.scroll));
  }
  onTouchDown({
    x,
    y
  }) {}
  onTouchMove({
    x,
    y
  }) {}
  onTouchUp({
    x,
    y
  }) {}
  onWheel({
    pixelX,
    pixelY
  }) {
    // this.x.target += pixelX
    this.y.target += pixelY;
  }

  /****
   * LOOP
   * ***/
  update() {
    this.y.target += this.speedAutoScroll;
    this.speed.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.speed.current, this.speed.target, this.speed.lerp);
    this.x.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.x.current, this.x.target, this.x.lerp);
    this.y.current = gsap__WEBPACK_IMPORTED_MODULE_4__["default"].utils.interpolate(this.y.current, this.y.target, this.y.lerp);
    if (this.scroll.y < this.y.current) {
      this.y.direction = 'top';
    } else if (this.scroll.y > this.y.current) {
      this.y.direction = 'bottom';
    }
    this.scroll.x = this.x.current;
    this.scroll.y = this.y.current;
    lodash_map__WEBPACK_IMPORTED_MODULE_0___default()(this.medias, (media, index) => {
      const offsetY = this.sizes.height * 0.6;
      const scaleY = media.mesh.scale.y / 2;
      if (index % 2 === 0) {
        this.multiplier = -1;
      } else if (index % 2 === 1) {
        this.multiplier = 1;
      }
      media.update(media, this.scroll, this.speed.current, this.multiplier, this.y.direction, this.gallerySizes.height, offsetY, scaleY, this.y);
    });
  }

  /****
   * DESTROY
   * ***/
  destroy() {
    this.scene.removeChild(this.group);
  }
});

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("584848ee581da8be5a8c")
/******/ })();
/******/ 
/******/ }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksQ0FBQ3BFLEtBQUssQ0FBQztFQUNwQztBQUNGOzs7Ozs7OztVQzlMQSIsInNvdXJjZXMiOlsid2VicGFjazovL2JvaWxlcnBsYXRlLXByaXNtaWMvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvSG9tZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9ib2lsZXJwbGF0ZS1wcmlzbWljL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xyXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xyXG5cclxuaW1wb3J0IG1hcCBmcm9tICdsb2Rhc2gvbWFwJ1xyXG5cclxuaW1wb3J0IE1lZGlhIGZyb20gJy4vTWVkaWEnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IgKHsgZ2wsIHNjZW5lLCBzaXplcyB9KSB7XHJcbiAgICB0aGlzLmdsID0gZ2xcclxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxyXG4gICAgdGhpcy5zaXplcyA9IHNpemVzXHJcblxyXG4gICAgdGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKVxyXG5cclxuICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZ2FsbGVyeScpXHJcbiAgICB0aGlzLm1lZGlhc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX2dhbGxlcnlfX21lZGlhX19pbWFnZScpXHJcbiAgICB0aGlzLnNsb3RSb2xsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2J1dHRvbicpXHJcbiAgICB0aGlzLmJ1dHRvblJvbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fYnV0dG9uIGJ1dHRvbicpXHJcblxyXG4gICAgdGhpcy5zcGVlZEF1dG9TY3JvbGwgPSAyXHJcblxyXG4gICAgdGhpcy54ID0ge1xyXG4gICAgICBjdXJyZW50OiAwLFxyXG4gICAgICB0YXJnZXQ6IDAsXHJcbiAgICAgIGxlcnA6IDAuMVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMueSA9IHtcclxuICAgICAgY3VycmVudDogMCxcclxuICAgICAgdGFyZ2V0OiAwLFxyXG4gICAgICBsZXJwOiAwLjFcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQgPSB7XHJcbiAgICAgIHg6IDAsXHJcbiAgICAgIHk6IDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNjcm9sbCA9IHtcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3BlZWQgPSB7XHJcbiAgICAgIGN1cnJlbnQ6IDAsXHJcbiAgICAgIHRhcmdldDogMCxcclxuICAgICAgbGVycDogMC4xXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpXHJcbiAgICB0aGlzLmNyZWF0ZUdhbGxlcnkoKVxyXG4gICAgdGhpcy5vblJlc2l6ZSh7XHJcbiAgICAgIHNpemVzOiB0aGlzLnNpemVzXHJcbiAgICB9KVxyXG4gICAgdGhpcy5jcmVhdGVCdXR0b25Sb2xsKHRoaXMuc2xvdFJvbGwpXHJcblxyXG4gICAgdGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcclxuXHJcbiAgICB0aGlzLnNob3coKVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlR2VvbWV0cnkgKCkge1xyXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsLCB7XHJcbiAgICAgIGhlaWdodFNlZ21lbnRzOiAyMCxcclxuICAgICAgd2lkdGhTZWdtZW50czogMjBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjcmVhdGVHYWxsZXJ5ICgpIHtcclxuICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IE1lZGlhKHtcclxuICAgICAgICBlbGVtZW50LFxyXG4gICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxyXG4gICAgICAgIGluZGV4LFxyXG4gICAgICAgIGdsOiB0aGlzLmdsLFxyXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxyXG4gICAgICAgIHNpemVzOiB0aGlzLnNpemVzXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQnV0dG9uUm9sbCAoYnV0dG9uUm9sbCkge1xyXG4gICAgbGV0IG1lZGlhQXNzZXRzID0gW11cclxuXHJcbiAgICBidXR0b25Sb2xsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgXyA9PiB7XHJcbiAgICAgIC8vIHRoaXMuc2Nyb2xsLnkgPSAwXHJcbiAgICAgIG1lZGlhQXNzZXRzID0gW11cclxuICAgICAgdGhpcy5zcGVlZEF1dG9TY3JvbGwgPSAwXHJcbiAgICAgIHRoaXMueS50YXJnZXQgPSBNYXRoLnJhbmRvbSgpICogNTAwMFxyXG4gICAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcclxuICAgICAgICBtZWRpYUFzc2V0c1tpbmRleF0gPSBbbWVkaWEuYm91bmRzLnRvcCwgbWVkaWEuZWxlbWVudC5hbHQsIG1lZGlhLmVsZW1lbnQuY3VycmVudFNyY11cclxuICAgICAgfSlcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5zY3JvbGwueSArIHRoaXMuc2l6ZXMuaGVpZ2h0IC8gMlxyXG4gICAgICBjb25zb2xlLmxvZyh0YXJnZXQpXHJcblxyXG4gICAgICAvLyBtZWRpYUFzc2V0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIC8vICAgcmV0dXJuIE1hdGguYWJzKHRhcmdldCAtIGFbMF0pIC0gTWF0aC5hYnModGFyZ2V0IC0gYlswXSlcclxuICAgICAgLy8gfSlcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKG1lZGlhQXNzZXRzKVxyXG4gICAgICB0aGlzLmJ1dHRvblJvbGwuaW5uZXJUZXh0ID0gJ1JvbGwgYWdhaW4gPydcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIEFOSU1BVElPTlNcclxuICAgKiAqKiovXHJcbiAgc2hvdyAoKSB7XHJcbiAgICBtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLnNob3coKSlcclxuICB9XHJcblxyXG4gIGhpZGUgKCkge1xyXG4gICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5oaWRlKCkpXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIEVWRU5UU1xyXG4gICAqICoqKi9cclxuICBvblJlc2l6ZSAoZXZlbnQpIHtcclxuICAgIHRoaXMuZ2FsbGVyeUJvdW5kcyA9IHRoaXMuZ2FsbGVyeUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcclxuXHJcbiAgICB0aGlzLnNpemVzID0gZXZlbnQuc2l6ZXNcclxuXHJcbiAgICB0aGlzLmdhbGxlcnlTaXplcyA9IHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLmdhbGxlcnlCb3VuZHMuaGVpZ2h0IC8gd2luZG93LmlubmVySGVpZ2h0ICogdGhpcy5zaXplcy5oZWlnaHQsXHJcbiAgICAgIHdpZHRoOiB0aGlzLmdhbGxlcnlCb3VuZHMud2lkdGggLyB3aW5kb3cuaW5uZXJXaWR0aCAqIHRoaXMuc2l6ZXMud2lkdGhcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNjcm9sbC54ID0gdGhpcy54LnRhcmdldCA9IDBcclxuICAgIHRoaXMuc2Nyb2xsLnkgPSB0aGlzLnkudGFyZ2V0ID0gMFxyXG5cclxuICAgIG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKSlcclxuICB9XHJcblxyXG4gIG9uVG91Y2hEb3duICh7IHgsIHkgfSkge1xyXG4gIH1cclxuXHJcbiAgb25Ub3VjaE1vdmUgKHsgeCwgeSB9KSB7XHJcblxyXG4gIH1cclxuXHJcbiAgb25Ub3VjaFVwICh7IHgsIHkgfSkge1xyXG5cclxuICB9XHJcblxyXG4gIG9uV2hlZWwgKHsgcGl4ZWxYLCBwaXhlbFkgfSkge1xyXG4gICAgLy8gdGhpcy54LnRhcmdldCArPSBwaXhlbFhcclxuICAgIHRoaXMueS50YXJnZXQgKz0gcGl4ZWxZXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIExPT1BcclxuICAgKiAqKiovXHJcbiAgdXBkYXRlICgpIHtcclxuICAgIHRoaXMueS50YXJnZXQgKz0gdGhpcy5zcGVlZEF1dG9TY3JvbGxcclxuICAgIHRoaXMuc3BlZWQuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5zcGVlZC5jdXJyZW50LCB0aGlzLnNwZWVkLnRhcmdldCwgdGhpcy5zcGVlZC5sZXJwKVxyXG5cclxuICAgIHRoaXMueC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnguY3VycmVudCwgdGhpcy54LnRhcmdldCwgdGhpcy54LmxlcnApXHJcbiAgICB0aGlzLnkuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy55LmN1cnJlbnQsIHRoaXMueS50YXJnZXQsIHRoaXMueS5sZXJwKVxyXG5cclxuICAgIGlmICh0aGlzLnNjcm9sbC55IDwgdGhpcy55LmN1cnJlbnQpIHtcclxuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICd0b3AnXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsLnkgPiB0aGlzLnkuY3VycmVudCkge1xyXG4gICAgICB0aGlzLnkuZGlyZWN0aW9uID0gJ2JvdHRvbSdcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNjcm9sbC54ID0gdGhpcy54LmN1cnJlbnRcclxuICAgIHRoaXMuc2Nyb2xsLnkgPSB0aGlzLnkuY3VycmVudFxyXG5cclxuICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhLCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBvZmZzZXRZID0gdGhpcy5zaXplcy5oZWlnaHQgKiAwLjZcclxuICAgICAgY29uc3Qgc2NhbGVZID0gbWVkaWEubWVzaC5zY2FsZS55IC8gMlxyXG5cclxuICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGllciA9IC0xXHJcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggJSAyID09PSAxKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsaWVyID0gMVxyXG4gICAgICB9XHJcblxyXG4gICAgICBtZWRpYS51cGRhdGUobWVkaWEsIHRoaXMuc2Nyb2xsLCB0aGlzLnNwZWVkLmN1cnJlbnQsIHRoaXMubXVsdGlwbGllciwgdGhpcy55LmRpcmVjdGlvbiwgdGhpcy5nYWxsZXJ5U2l6ZXMuaGVpZ2h0LCBvZmZzZXRZLCBzY2FsZVksIHRoaXMueSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKioqKlxyXG4gICAqIERFU1RST1lcclxuICAgKiAqKiovXHJcbiAgZGVzdHJveSAoKSB7XHJcbiAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXHJcbiAgfVxyXG59XHJcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjU4NDg0OGVlNTgxZGE4YmU1YThjXCIpIl0sIm5hbWVzIjpbIlBsYW5lIiwiVHJhbnNmb3JtIiwiR1NBUCIsIm1hcCIsIk1lZGlhIiwiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJncm91cCIsImdhbGxlcnlFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVkaWFzRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2xvdFJvbGwiLCJidXR0b25Sb2xsIiwic3BlZWRBdXRvU2Nyb2xsIiwieCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJsZXJwIiwieSIsInNjcm9sbEN1cnJlbnQiLCJzY3JvbGwiLCJzcGVlZCIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsIm9uUmVzaXplIiwiY3JlYXRlQnV0dG9uUm9sbCIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsImhlaWdodFNlZ21lbnRzIiwid2lkdGhTZWdtZW50cyIsIm1lZGlhcyIsImVsZW1lbnQiLCJpbmRleCIsIm1lZGlhQXNzZXRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl8iLCJNYXRoIiwicmFuZG9tIiwibWVkaWEiLCJib3VuZHMiLCJ0b3AiLCJhbHQiLCJjdXJyZW50U3JjIiwiaGVpZ2h0IiwiY29uc29sZSIsImxvZyIsImlubmVyVGV4dCIsImhpZGUiLCJldmVudCIsImdhbGxlcnlCb3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnYWxsZXJ5U2l6ZXMiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsIndpZHRoIiwiaW5uZXJXaWR0aCIsIm9uVG91Y2hEb3duIiwib25Ub3VjaE1vdmUiLCJvblRvdWNoVXAiLCJvbldoZWVsIiwicGl4ZWxYIiwicGl4ZWxZIiwidXBkYXRlIiwidXRpbHMiLCJpbnRlcnBvbGF0ZSIsImRpcmVjdGlvbiIsIm9mZnNldFkiLCJzY2FsZVkiLCJtZXNoIiwic2NhbGUiLCJtdWx0aXBsaWVyIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIl0sInNvdXJjZVJvb3QiOiIifQ==